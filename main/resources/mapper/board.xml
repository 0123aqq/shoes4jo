<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- xml파일로 옮기고 BoardMapper에 인터페이스 만들어서 구현하게 함 -->

<mapper namespace="com.multi.shoes4jo.mapper.BoardMapper">

	<resultMap id="boardResult" type="BoardVO">
		<result column="bno" property="bno" />
		<result column="category" property="category" />
		<result column="title" property="title" />
		<result column="content" property="content" />
		<result column="writer" property="writer" />
		<result column="viewcnt" property="viewcnt" />
		<result column="regdate" property="regdate" />
		<result column="file_name" property="file_name" />
		<result column="file_path" property="file_path" />
		<result column="link" property="link" />
	</resultMap>



	<select id="listPage" resultType="com.multi.shoes4jo.vo.BoardVO"
		parameterType="com.multi.shoes4jo.util.Criteria">
		SELECT
		bno,
		title,
		content,
		writer,
		regdate
		FROM
		campusDB.4jo_board
		ORDER BY bno DESC
		LIMIT #{perPageNum} OFFSET
		#{pageStart}
	</select>


	<select id="listCount" resultType="int">
	<![CDATA[
		SELECT COUNT(bno)
		  FROM campusDB.4jo_board
		 WHERE bno > 0
	]]>
	</select>


	<!-- selectForMagazine -->
	<select id='selectForMagazine' parameterType='java.lang.String'
		resultMap='boardResult'>
		SELECT * FROM campusDB.4jo_board where category =
		#{category} ORDER BY bno DESC limit
		3
	</select>


	<!-- selectOneCat -->
	<select id='selectOneCat' parameterType='java.lang.String'
		resultMap='boardResult'>
		SELECT * FROM campusDB.4jo_board WHERE category =
		#{category} ORDER BY bno DESC
	</select>


	<!-- select -->
	<select id='select' parameterType='java.lang.String'
		resultMap='boardResult'>
		SELECT * FROM campusDB.4jo_board WHERE bno = #{bno}
	</select>


	<!-- insert -->
	<insert id="insert" parameterType="BoardVO">
		INSERT INTO campusDB.4jo_board
		(bno, category, title, content, writer, file_name,
		file_path, link)
		VALUES (#{bno}, #{category}, #{title}, #{content},
		#{writer},
		#{file_name}, #{file_path}, #{link})
	</insert>


	<!-- update -->
	<update id="update" parameterType="BoardVO">
		UPDATE campusDB.4jo_board SET
		category = #{category}, title = #{title}, content =
		#{content},
		file_name =#{file_name},
		file_path=#{file_path},
		link=#{link}
		WHERE
		bno=#{bno}
	</update>


	<!-- updateCount -->
	<update id="updateCount" parameterType="java.lang.String">
		UPDATE campusDB.4jo_board
		SET viewcnt=viewcnt+1 WHERE bno=#{bno}
	</update>


	<!-- delete -->
	<delete id="delete" parameterType="java.lang.String">
		DELETE FROM campusDB.4jo_board
		WHERE bno=#{bno}
	</delete>


	<!-- maxBno -->
	<select id="maxBno" resultType="java.lang.Integer">
		SELECT MAX(bno) from
		campusDB.4jo_Board
	</select>


</mapper>